(function(){"use strict";const c=document.getElementById("progressBar");function a(){if(!c)return;const t=window.scrollY,e=document.documentElement.scrollHeight-window.innerHeight,n=e>0?t/e*100:0;c.style.width=`${Math.min(n,100)}%`}const n=document.querySelector(".site-nav"),t=document.querySelector(".nav-toggle"),e=document.querySelector(".mobile-menu");let r=window.scrollY,s=!1;function l(){const t=window.scrollY;t>10?n.classList.add("nav-scrolled"):n.classList.remove("nav-scrolled"),e?.classList.contains("active")||(t>r&&t>200?n.classList.add("nav-hidden"):n.classList.remove("nav-hidden")),r=t,s=!1}function u(){s||(requestAnimationFrame(()=>{l(),a()}),s=!0)}function o(){const n=e.classList.contains("active");t.classList.toggle("active"),e.classList.toggle("active"),document.body.classList.toggle("no-scroll"),t.setAttribute("aria-expanded",!n)}t&&e&&(t.addEventListener("click",o),e.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{e.classList.contains("active")&&o()})}),document.addEventListener("keydown",t=>{t.key==="Escape"&&e.classList.contains("active")&&o()}));const h={root:null,rootMargin:"0px 0px -10% 0px",threshold:.1},i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),i.unobserve(e.target))})},h);function m(){const e=document.querySelector(".article-content");e&&e.querySelectorAll("p, h2, h3, blockquote, figure, ul, ol, .section-break").forEach(e=>{i.observe(e)}),document.querySelectorAll(".article-card").forEach((e,t)=>{e.style.animationDelay=`${t*.1}s`,i.observe(e)})}function f(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(t==="#")return;const n=document.querySelector(t);n&&(e.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}))})})}function d(){window.addEventListener("scroll",u,{passive:!0}),window.addEventListener("load",()=>{a(),l()}),m(),f(),calculateReadingTime()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d()})()